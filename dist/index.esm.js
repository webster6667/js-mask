import r from"@babel/runtime/helpers/esm/toConsumableArray";import e from"@babel/runtime/helpers/esm/typeof";function t(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=function(r,e){if(r){if("string"==typeof r)return n(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(r,e):void 0}}(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var o=0,a=function(){};return{s:a,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,f=!0,l=!1;return{s:function(){t=t.call(r)},n:function(){var r=t.next();return f=r.done,r},e:function(r){l=!0,i=r},f:function(){try{f||null==t.return||t.return()}finally{if(l)throw i}}}}function n(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}var o=function r(n,o){var a=!0;if(n&&o){if("object"!==e(n)||"object"!==e(o))return!1;var i=Object.keys(n),f=Object.keys(o);if(i.length===f.length){var l,c=t(i);try{for(c.s();!(l=c.n()).done;){var s=l.value,u=n[s];if(!Object.hasOwnProperty.call(o,s)){a=!1;break}var b=o[s];if("object"===e(u)&&"object"===e(b)){if(!r(u,b)){a=!1;break}}else if(b!=u){a=!1;break}}}catch(r){c.e(r)}finally{c.f()}}else a=!1}else a=!1;return a};function a(r,t){if(Array.isArray(r))return"object"===e(t)?r.filter((function(r){return"object"===e(r)&&function(r){var t=!0;if(!Array.isArray(r))throw new Error("compared object must be in array");for(var n=0;;n++){var a=r[n],i=r[n+1];if(!a||!i){if("object"!==e(a))throw new Error("type of compared items must be object");break}if("object"!==e(a)||"object"!==e(i))throw new Error("type of compared items must be object");if(!1===(t=o(a,i)))break}return t}([r,t])})).length:r.filter((function(r){return r==t})).length;throw new Error("first parameter is not Array")}var i=function(r,e,t){return r.map((function(r){return r===t?e:r}))},f=function(r,e){var t=/\[[\\d\w-]+\]/g,n=r.match(t);return{regExpsArray:n?Array.from(n).reverse():[],maskSymbolsArray:r.replace(t,e).split("")}},l=function(e,t){for(var n=t||{},o=n.maskPattern,l=void 0===o?"":o,c=n.placeholder,s=void 0===c?"":c,u="[",b=s,m=f(l,u),y=m.regExpsArray,p=m.maskSymbolsArray,v=p.length,h=0,d=r(p),g=0,j=0;j<v;j++){var A=p[j],k=e[h],w=a(d,u),x=A===u,E=!k,S=g>0?g+1:0;if(k){if(k===A){h++;continue}if(x){var O=y.pop(),R=O?new RegExp(O):null;if(!R||!R.test(k)){d=b?i(d,s,u):d.slice(0,S);break}d[j]=k,h++}}else if(E&&w>0){d=b?i(d,s,u):d.slice(0,j);break}g=x?j:g}return d.join("")},c=function(e,t){for(var n=t||{},o=n.maskPattern,a=void 0===o?"":o,l=n.placeholder,c=void 0===l?"_":l,s="[",u=f(a,s),b=u.regExpsArray,m=u.maskSymbolsArray,y=m.length,p=m.indexOf(s),v=-1!=p?m.slice(0,p).join(""):"",h=0,d=r(m),g=0,j=[],A=[],k=0;k<y;k++){var w=m[k],x=e[h],E=x===w,S=w===s,O=!x,R=0===j.length?0:k,I=d.length;if(x){if(E){h++;continue}if(S){var P=b.pop(),M=P?new RegExp(P):null;if(!M||!M.test(x)){A=(d=i(d,c,s)).slice(R,I);break}d[k]=x,j.push(x),h++}}else if(O){A=(d=i(d,c,s)).slice(R,I);break}g=S?k:g}var C=d.indexOf(c),B=-1===C;return{clearValue:j.join(""),remainderMaskPattern:A.join(""),patterBeforeRegExpSymbol:v,isRegExpFinished:B,firstRegExpSymbolIndex:C,lastMaskRegExpSymbolIndex:g}};export{l as mask,c as unmask};
